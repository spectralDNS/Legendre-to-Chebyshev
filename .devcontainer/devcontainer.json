{
    "image": "mcr.microsoft.com/devcontainers/universal:2",
    "hostRequirements": {
      "cpus": 4
    },
    "waitFor": "onCreateCommand",
    "updateContentCommand": ["/bin/bash", "-c", "conda env create --file l2copenblas.yml && source activate l2copenblas && cd src && ./build_meson.sh"],
    "customizations": {
      "codespaces": {
        "openFiles": []
      },
      "vscode": {
        "extensions": [
          "ms-python.python"
        ]
      }
    },
    "postCreateCommand": [
        "pyver=$(python -c 'import sys;print(sys.version[:(len(str(sys.version_info.major))+len(str(sys.version_info.minor))+1)])')", 
        "echo 'source activate l2copenblas' >> ~/.bashrc",
        "echo 'export PATH=/workspaces/Legendre-to-Chebyshev/src/build-install/bin:$PATH' >> ~/.bashrc",
        "echo 'export LD_LIBRARY_PATH=/workspaces/Legendre-to-Chebyshev/src/build-install/lib:$LD_LIBRARY_PATH' >> ~/.bashrc",
        "echo 'export PYTHONPATH=/workspaces/Legendre-to-Chebyshev/src/build-install/lib/python$(pyver)/site-packages:$PYTHONPATH' >> ~/.bashrc"]
  }
